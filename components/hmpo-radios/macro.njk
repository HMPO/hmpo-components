{% macro hmpoRadios(ctx, params, base) %}
    {%- set params = hmpoGetParams(ctx, params, base) %}

    {%- set value = hmpoGetValue(ctx, params) %}

    {%- set classes = params.classes if params.classes else "" %}
    {%- set classes = classes + " govuk-radios--inline" if paras.inline else classes %}

    {%- set pageHeading = {
        legend: {
            isPageHeading: true,
            classes: "govuk-fieldset__legend--l"
        }
    } if params.isPageHeading %}

    {%- set args = {
        idPrefix: params.id,
        name: params.id,
        fieldset: merge(pageHeading, {
            legend: hmpoGetOptions(ctx, params, "legend"),
            attributes: {
                id: params.id + "-fieldset",
                "aria-required": hmpoGetValidatorAttribute(ctx, params, "required")
            }
        }, params.fieldset),
        hint: hmpoGetOptions(ctx, params, "hint", true),
        errorMessage: hmpoGetError(ctx, params),
        type: params.type,
        classes: classes,
        formGroup: params.formGroup,
        items: hmpoGetItems(ctx, params, value, false, true)
    } %}

    {%- from "govuk/components/radios/macro.njk" import govukRadios %}
    {% if params.conditionals and params.inline %}
        <div data-module="govuk-radios" class="radios-with-conditionals"{% if params.multiConditional %} data-multi-conditional="true"{% endif %}>
            {{- govukRadios(args) }}
            {% for key, conditional in params.conditionals %}
                {% if conditional.html %}
                    {% if conditional.removeInset %}
                        <div id="{{ conditional.id }}" class="{{ conditional.classes }}">
                            {{ conditional.html | safe }}
                        </div>
                    {% else %}
                        {% from "hmpo-inset-text/macro.njk" import hmpoInsetText %}
                        {% call hmpoInsetText({ id: conditional.id, classes: "govuk-radios__conditional" }) %}
                            {{ conditional.html | safe }}
                        {% endcall %}
                    {% endif %}
                {% endif %}
            {% endfor %}
        </div>
    {% else %}
        {{- govukRadios(args) }}
    {% endif %}

{% endmacro %}
